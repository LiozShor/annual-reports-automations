<!DOCTYPE html>
<html dir="rtl" lang="he">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>סקירת סיווג מסמכים - משרד רו"ח משה עציץ</title>
    <link rel="stylesheet" href="assets/css/design-system.css">
    <link rel="stylesheet" href="assets/css/document-review.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js" defer></script>
</head>

<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <div class="login-icon"><i data-lucide="scan-eye" class="icon-xl"></i></div>
            <h1>סקירת סיווג מסמכים</h1>
            <p>משרד רו"ח משה עציץ</p>
            <form onsubmit="login(); return false;">
                <input type="password" id="passwordInput" placeholder="הזן סיסמה" autocomplete="current-password">
            </form>
            <div id="loginError" class="login-error">סיסמה שגויה</div>
            <button class="btn btn-primary w-full" onclick="login()">
                <i data-lucide="zap" class="icon-sm"></i> כניסה
            </button>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app">
        <!-- Navbar -->
        <nav class="review-navbar">
            <div class="nav-brand">
                <i data-lucide="scan-eye" class="icon"></i>
                סקירת סיווג מסמכים
            </div>
            <div class="nav-actions">
                <button class="btn btn-ghost btn-sm" onclick="loadClassifications()">
                    <i data-lucide="refresh-cw" class="icon-sm"></i> רענן
                </button>
                <a href="admin/" class="btn btn-ghost btn-sm">
                    <i data-lucide="layout-dashboard" class="icon-sm"></i> פורטל ניהול
                </a>
                <button class="btn btn-ghost btn-sm" onclick="logout()">
                    <i data-lucide="log-out" class="icon-sm"></i> התנתק
                </button>
            </div>
        </nav>

        <!-- Header -->
        <div class="page-content">
            <div class="review-page-header">
                <div class="review-page-header-info">
                    <h1>סקירת סיווג מסמכים</h1>
                    <p>בדיקה ואישור סיווג AI של מסמכים שהתקבלו מלקוחות</p>
                </div>
            </div>

            <!-- Stats Bar -->
            <div class="stats-bar">
                <div class="stat-item stat-pending">
                    <i data-lucide="clock" class="icon-sm"></i>
                    <span class="stat-value" id="stat-pending">0</span>
                    <span class="stat-label">ממתינים</span>
                </div>
                <div class="stat-item stat-matched">
                    <i data-lucide="link" class="icon-sm"></i>
                    <span class="stat-value" id="stat-matched">0</span>
                    <span class="stat-label">זוהו</span>
                </div>
                <div class="stat-item stat-unmatched">
                    <i data-lucide="unlink" class="icon-sm"></i>
                    <span class="stat-value" id="stat-unmatched">0</span>
                    <span class="stat-label">לא זוהו</span>
                </div>
                <div class="stat-item stat-high-conf">
                    <i data-lucide="shield-check" class="icon-sm"></i>
                    <span class="stat-value" id="stat-high-confidence">0</span>
                    <span class="stat-label">ביטחון גבוה</span>
                </div>
            </div>

            <!-- Filter Bar -->
            <div class="filter-bar">
                <div class="filter-group">
                    <label><i data-lucide="search" class="icon-sm"></i></label>
                    <input type="text" id="searchInput" placeholder="חיפוש לפי שם לקוח..." oninput="applyFilters()">
                </div>
                <div class="filter-group">
                    <label><i data-lucide="gauge" class="icon-sm"></i> ביטחון:</label>
                    <select id="confidenceFilter" onchange="applyFilters()">
                        <option value="">הכל</option>
                        <option value="high">גבוה (85%+)</option>
                        <option value="medium">בינוני (50-84%)</option>
                        <option value="low">נמוך (&lt;50%)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label><i data-lucide="filter" class="icon-sm"></i> סוג:</label>
                    <select id="typeFilter" onchange="applyFilters()">
                        <option value="">הכל</option>
                        <option value="matched">זוהו</option>
                        <option value="unmatched">לא זוהו</option>
                    </select>
                </div>
            </div>

            <!-- Cards Container -->
            <div id="cardsContainer">
                <div class="empty-state">
                    <div class="empty-state-icon"><i data-lucide="loader" class="icon-2xl"></i></div>
                    <p>טוען סיווגים...</p>
                </div>
            </div>

            <!-- Empty State (when all reviewed) -->
            <div id="emptyState" class="empty-state-done" style="display: none;">
                <div class="empty-done-icon"><i data-lucide="circle-check-big" class="icon-2xl"></i></div>
                <h2>אין סיווגים ממתינים לבדיקה</h2>
                <p>כל המסמכים סווגו ואושרו בהצלחה</p>
                <button class="btn btn-secondary mt-4" onclick="loadClassifications()">
                    <i data-lucide="refresh-cw" class="icon-sm"></i> בדוק שוב
                </button>
            </div>
        </div>
    </div>

    <!-- Reassign Modal -->
    <div id="reassignModal" class="modal-overlay">
        <div class="modal-panel">
            <div class="modal-panel-header">
                <i data-lucide="arrow-right-left" class="icon"></i>
                שיוך מסמך למסמך אחר
            </div>
            <div class="modal-panel-body">
                <p class="mb-3">בחר את המסמך הנכון מרשימת המסמכים החסרים של הלקוח:</p>
                <div class="reassign-file-info mb-4" id="reassignFileInfo"></div>
                <label class="form-label">מסמך יעד:</label>
                <select id="reassignSelect" class="reassign-select">
                    <option value="">-- בחר מסמך --</option>
                </select>
            </div>
            <div class="modal-panel-footer">
                <button class="btn btn-secondary" onclick="closeReassignModal()">ביטול</button>
                <button class="btn btn-primary" id="reassignConfirmBtn" onclick="confirmReassign()" disabled>
                    <i data-lucide="check" class="icon-sm"></i> שייך
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-box">
            <div class="spinner spinner-lg"></div>
            <p id="loadingText">מעבד...</p>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast">
        <i data-lucide="check-circle" class="icon-sm" id="toastIcon"></i>
        <span id="toastText"></span>
    </div>

    <!-- Script -->
    <script src="assets/js/document-review.js"></script>
</body>

</html>
